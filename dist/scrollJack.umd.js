!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ScrollJack=e()}(this,function(){var t=function(){return{top:0,left:0,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},e=function(e){void 0===e&&(e=document.body),this.element=e,this.registry=Object.create(null),this.bbMap=new Map,this.raf=null,this.timeout=null,this.lastScrollY=0,this.lastScrollX=0,console.log("element",this.element),this.viewport=this.element===document.body?t():e.getBoundingClientRect(),this.handler=this.handler.bind(this),this.resize=this.resize.bind(this),this.inView=this.inView.bind(this),this.aboveView=this.aboveView.bind(this),this.belowView=this.belowView.bind(this),this.leftOfView=this.leftOfView.bind(this),this.rightOfView=this.rightOfView.bind(this),this.element===document.body?window.addEventListener("scroll",this.handler,{capture:!1,passive:!0}):this.element.addEventListener("scroll",this.handler,{capture:!1,passive:!0}),window.addEventListener("resize",this.resize,{capture:!1,passive:!0})};return e.prototype.on=function(t,e){return(this.registry[t]||(this.registry[t]=[])).push(e),this},e.prototype.off=function(t,e){return this.registry[t]&&this.registryl[t].splice(this.registry[t].indexOf(e)>>>0,1),this},e.prototype.trigger=function(t,e){return(this.registry[t]||[]).slice().map(function(t){t(e)}),this},e.prototype.resize=function(){var e=this;this.timeout&&window.clearTimeout(timeout),this.timeout=window.setTimeout(function(){e.viewport=element===document.body?t():element.getClientBoundingRect()},16)},e.prototype.destory=function(){this.element===document.body?window.removeEventListener("scroll",this.handler):this.element.removeEventListener("scroll",this.handler),window.removeEventListener("resize",this.resize)},e.prototype.getClientBoundingRect=function(t){var e;return this.bbMap.has(t)?e=this.bbMap.get(t):(e=t.getBoundingClientRect(),this.bbMap.set(t,e)),e},e.prototype.inView=function(t){var e=this.getClientBoundingRect(t);return e.top-this.viewport.top>-1*e.height&&e.top-this.viewport.top<this.viewport.height&&e.left-this.viewport.left>-1*e.width&&e.left-this.viewport.left<this.viewport.width},e.prototype.aboveView=function(t){var e=this.getClientBoundingRect(t);return e.top-this.viewport.top<0&&-1*(e.top-this.viewport.top)>e.height},e.prototype.belowView=function(t){return this.getClientBoundingRect(t).top-this.viewport.top>this.viewport.height},e.prototype.leftOfView=function(t){var e=this.getClientBoundingRect(t);return e.left-this.viewport.left<0&&-1*(e.left-this.viewport.left)>e.width},e.prototype.rightOfView=function(t){return this.getClientBoundingRect(t).left-this.viewport.left>this.viewport.width},e.prototype.handler=function(t){var i=this;this.raf&&window.cancelAnimationFrame(this.raf),this.raf=window.requestAnimationFrame(function(){var o,n={event:t,inView:i.inView,aboveView:i.aboveView,belowView:i.belowView,leftOfView:i.leftOfView,rightOfView:i.rightOfView};n.scrollPositionY=(o=i.element)===document.body?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:o.scrollTop,n.scrollPositionX=function(t){return t===document.body?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:t.scrollLeft}(i.element),n.scrollPositionY>i.lastScrollY?(n.goingDown=!0,n.goingUp=!1,n.vertical=!0):n.scrollPositionY<i.lastScrollY?(n.goingDown=!1,n.goingUp=!0,n.vertical=!0):(n.goingDown=!1,n.goingUp=!1,n.vertical=!1),n.scrollPositionX>i.lastScrollX?(n.goingRight=!0,n.goingLeft=!1,n.horizontal=!0):n.scrollPositionX<i.lastScrollX?(n.goingRight=!1,n.goingLeft=!0,n.horizontal=!0):(n.goingRight=!1,n.goingLeft=!1,n.horizontal=!1),n.deltaY=n.scrollPositionY-i.lastScrollY,n.deltaX=n.scrollPositionX-i.lastScrollX,i.lastScrollY=n.scrollPositionY,i.lastScrollX=n.scrollPositionX,i.trigger(e.SCROLL,n),n.goingUp&&i.trigger(e.SCROLL_UP,n),n.goingDown&&i.trigger(e.SCROLL_DOWN,n),n.vertical&&i.trigger(e.SCROLL_VERTICAL,n),n.goingLeft&&i.trigger(e.SCROLL_LEFT,n),n.goingRight&&i.trigger(e.SCROLL_RIGHT,n),n.horizontal&&i.trigger(e.SCROLL_HORIZONTAL,n),i.bbMap.clear()})},e.SCROLL="SCROLL",e.SCROLL_VERTICAL="SCROLL_VERTICAL",e.SCROLL_UP="SCROLL_UP",e.SCROLL_DOWN="SCROLL_DOWN",e.SCROLL_HORIZONTAL="SCROLL_HORIZONTRAL",e.SCROLL_LEFT="SCROLL_LEFT",e.SCROLL_RIGHT="SCROLL_RIGHT",e});
//# sourceMappingURL=scrollJack.umd.js.map
